{% extends 'base.html' %}

{% block title %}Perfil - Infinity School{% endblock %}

{% block header %}
<div class="nav-menu">
    <a href="/" class="btn btn-secondary">üè† Dashboard</a>
    <a href="/perfil" class="btn btn-primary">üë§ Perfil</a>
    <a href="#" class="btn btn-secondary">üìÖ Calend√°rio</a>
    <a href="#" class="btn btn-secondary">üìù Anota√ß√µes</a>
    <a href="#" class="btn btn-secondary">üîî Notifica√ß√µes</a>
</div>
{% endblock %}

{% block content %}
    <div class="profile-container">
        <div class="profile-header">
            <div class="profile-avatar">
                <img src="https://via.placeholder.com/120/6366f1/ffffff?text=JS" alt="Foto do perfil" id="profileImage">
                <button class="avatar-edit" onclick="editAvatar()">üì∑</button>
            </div>
            <div class="profile-info">
                <h2 id="userName">Jo√£o Silva</h2>
                <p class="profile-role" id="userRole">Professor de Matem√°tica</p>
                <p class="profile-email" id="userEmail">joao.silva@infinityschool.com.br</p>
                <button class="btn btn-primary" onclick="editProfile()">‚úèÔ∏è Editar Perfil</button>
            </div>
        </div>

        <div class="profile-content">
            <div class="profile-section">
                <h3>üìã Informa√ß√µes Pessoais</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <label>Nome Completo:</label>
                        <span id="fullName">Jo√£o Silva Santos</span>
                    </div>
                    <div class="info-item">
                        <label>CPF:</label>
                        <span id="cpf">***.***.***-**</span>
                    </div>
                    <div class="info-item">
                        <label>Data de Nascimento:</label>
                        <span id="birthDate">15/03/1985</span>
                    </div>
                    <div class="info-item">
                        <label>Telefone:</label>
                        <span id="phone">(11) 99999-9999</span>
                    </div>
                    <div class="info-item">
                        <label>Endere√ßo:</label>
                        <span id="address">Rua das Flores, 123 - S√£o Paulo, SP</span>
                    </div>
                    <div class="info-item">
                        <label>Data de Admiss√£o:</label>
                        <span id="admissionDate">01/02/2020</span>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3>üíº Informa√ß√µes Profissionais</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <label>Cargo:</label>
                        <span id="position">Professor de Matem√°tica</span>
                    </div>
                    <div class="info-item">
                        <label>Departamento:</label>
                        <span id="department">Ensino M√©dio</span>
                    </div>
                    <div class="info-item">
                        <label>Matr√≠cula:</label>
                        <span id="registration">INF2020001</span>
                    </div>
                    <div class="info-item">
                        <label>Carga Hor√°ria:</label>
                        <span id="workload">40h semanais</span>
                    </div>
                    <div class="info-item">
                        <label>Turmas:</label>
                        <span id="classes">1¬∫A, 2¬∫B, 3¬∫C</span>
                    </div>
                    <div class="info-item">
                        <label>Supervisor:</label>
                        <span id="supervisor">Maria Coordenadora</span>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3>üìù Bio Profissional</h3>
                <div class="bio-container">
                    <p id="userBio">
                        Professor de Matem√°tica com mais de 15 anos de experi√™ncia no ensino m√©dio. 
                        Especialista em metodologias ativas e uso de tecnologia na educa√ß√£o. 
                        Mestre em Educa√ß√£o Matem√°tica pela USP. Apaixonado por ensinar e inspirar 
                        jovens a descobrirem a beleza dos n√∫meros e da l√≥gica matem√°tica.
                    </p>
                    <button class="btn btn-secondary" onclick="editBio()">‚úèÔ∏è Editar Bio</button>
                </div>
            </div>

            <div class="profile-section">
                <h3>üéØ Estat√≠sticas</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">156</div>
                        <div class="stat-label">Tarefas Conclu√≠das</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">23</div>
                        <div class="stat-label">Reuni√µes Este M√™s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">89%</div>
                        <div class="stat-label">Taxa de Conclus√£o</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">4.8</div>
                        <div class="stat-label">Avalia√ß√£o M√©dia</div>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3>üîß Configura√ß√µes</h3>
                <div class="settings-list">
                    <div class="setting-item">
                        <label>Notifica√ß√µes por Email</label>
                        <input type="checkbox" id="emailNotifications" checked>
                    </div>
                    <div class="setting-item">
                        <label>Notifica√ß√µes Push</label>
                        <input type="checkbox" id="pushNotifications" checked>
                    </div>
                    <div class="setting-item">
                        <label>Modo Escuro Autom√°tico</label>
                        <input type="checkbox" id="autoDarkMode">
                    </div>
                    <div class="setting-item">
                        <label>Sincronizar com Google Calendar</label>
                        <input type="checkbox" id="googleSync" checked>
                    </div>
                </div>
                <button class="btn btn-primary mt-4" onclick="saveSettings()">üíæ Salvar Configura√ß√µes</button>
            </div>
        </div>
    </div>

    <!-- Modal de edi√ß√£o de perfil -->
    <div id="editProfileModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h3>Editar Perfil</h3>
            <form id="editProfileForm">
                <input type="text" id="editName" placeholder="Nome completo" required>
                <input type="email" id="editEmail" placeholder="Email" required>
                <input type="tel" id="editPhone" placeholder="Telefone">
                <input type="text" id="editPosition" placeholder="Cargo">
                <input type="text" id="editDepartment" placeholder="Departamento">
                <div class="modal-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Altera√ß√µes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de edi√ß√£o de bio -->
    <div id="editBioModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeBioModal()">&times;</span>
            <h3>Editar Bio Profissional</h3>
            <form id="editBioForm">
                <textarea id="editBioText" placeholder="Conte um pouco sobre sua experi√™ncia profissional..." rows="6"></textarea>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeBioModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Bio</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Fun√ß√µes de edi√ß√£o
        function editProfile() {
            document.getElementById('editName').value = document.getElementById('fullName').textContent;
            document.getElementById('editEmail').value = document.getElementById('userEmail').textContent;
            document.getElementById('editPhone').value = document.getElementById('phone').textContent;
            document.getElementById('editPosition').value = document.getElementById('position').textContent;
            document.getElementById('editDepartment').value = document.getElementById('department').textContent;
            document.getElementById('editProfileModal').style.display = 'block';
        }

        function closeEditModal() {
            document.getElementById('editProfileModal').style.display = 'none';
        }

        function editBio() {
            document.getElementById('editBioText').value = document.getElementById('userBio').textContent.trim();
            document.getElementById('editBioModal').style.display = 'block';
        }

        function closeBioModal() {
            document.getElementById('editBioModal').style.display = 'none';
        }

        function editAvatar() {
            alert('Funcionalidade de upload de foto ser√° implementada');
        }

        function saveSettings() {
            alert('Configura√ß√µes salvas com sucesso!');
        }

        // Submiss√£o dos formul√°rios
        document.getElementById('editProfileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Atualizar informa√ß√µes na p√°gina
            document.getElementById('userName').textContent = document.getElementById('editName').value.split(' ')[0] + ' ' + document.getElementById('editName').value.split(' ')[1];
            document.getElementById('fullName').textContent = document.getElementById('editName').value;
            document.getElementById('userEmail').textContent = document.getElementById('editEmail').value;
            document.getElementById('phone').textContent = document.getElementById('editPhone').value;
            document.getElementById('position').textContent = document.getElementById('editPosition').value;
            document.getElementById('userRole').textContent = document.getElementById('editPosition').value;
            document.getElementById('department').textContent = document.getElementById('editDepartment').value;
            
            closeEditModal();
            alert('Perfil atualizado com sucesso!');
        });

        document.getElementById('editBioForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            document.getElementById('userBio').textContent = document.getElementById('editBioText').value;
            
            closeBioModal();
            alert('Bio atualizada com sucesso!');
        });

        // Fechar modais ao clicar fora
        window.onclick = function(event) {
            const editModal = document.getElementById('editProfileModal');
            const bioModal = document.getElementById('editBioModal');
            
            if (event.target === editModal) {
                editModal.style.display = 'none';
            }
            if (event.target === bioModal) {
                bioModal.style.display = 'none';
            }
        }

        // Anima√ß√£o de entrada
        document.addEventListener('DOMContentLoaded', function() {
            const sections = document.querySelectorAll('.profile-section');
            sections.forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('fade-in');
                }, index * 200);
            });
        });
    </script>
{% endblock %}

